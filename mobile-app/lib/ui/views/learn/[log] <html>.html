[log] <html>

<head>
  <script src="https://unpkg.com/chai@4.3.10/chai.js"></script>
  <script src="https://unpkg.com/mocha/mocha.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/pyodide/v0.24.1/full/pyodide.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/mocha/mocha.css">
</head>

<body>
  <script type="module">
    import * as __helpers from "https://unpkg.com/@freecodecamp/curriculum-helpers@1.2.0/dist/index.js";

    const code = `<html>
        <body>

          <h1>CatPhotoApp</h1>
          <h2>Cat Photos</h2>
          <!-- TODO: Add link to cat photos -->
          <p>See more cat photos in our gallery.</p>

        </body>
      </html>`;
    const doc = new DOMParser().parseFromString(code, 'text/html');



    const assert = chai.assert;
    const tests = [`assert(document.querySelector('main'));`, `assert(code.match(/<\\/main\\>/));`, `const main = document.querySelector('main');
      assert.equal(main?.previousElementSibling, null);`, `const collection = [...document.querySelectorAll('main,h1')].map(
        (node) => node.nodeName
      );
      assert(collection.indexOf('MAIN') < collection.indexOf('H1'));`, `const mainNode = document.querySelector('main');
      const pNode = document.querySelector('p');
      assert(
        mainNode.contains(pNode) &&
          pNode.textContent.toLowerCase().match(/see more cat photos in our gallery/)
      );`];
    const testText = ["<p>Your <code>main</code> element should have an opening tag. Opening tags have this syntax: <code>&#x3C;elementName></code>.</p>", "<p>Your <code>main</code> element should have a closing tag. Closing tags have a <code>/</code> just after the <code>&#x3C;</code> character.</p>", "<p>Your <code>main</code> element's opening tag should be below the <code>body</code> element's opening tag. You have them in the wrong order.</p>", "<p>Your <code>main</code> element's opening tag should be above the <code>h1</code> element. You have them in the wrong order.</p>", "<p>Your <code>main</code> element's closing tag should be below the <code>p</code> element. You have them in the wrong order.</p>"];

    function getUserInput(returnCase) {
      switch (returnCase) {
        case 'index':
          return `<html>
        <body>

          <h1>CatPhotoApp</h1>
          <h2>Cat Photos</h2>
          <!-- TODO: Add link to cat photos -->
          <p>See more cat photos in our gallery.</p>

        </body>
      </html>`;
        case 'editableContents':
          return `<html>
        <body>

          <h1>CatPhotoApp</h1>
          <h2>Cat Photos</h2>
          <!-- TODO: Add link to cat photos -->
          <p>See more cat photos in our gallery.</p>

        </body>
      </html>`;
        default:
          return code;
      }
    }

    async function main() {
      let pyodide = await loadPyodide();
      // Pyodide is now ready to use...
      console.log(pyodide.runPython(`
              import sys
              sys.version`));
    };
    main();

    doc.__runTest = async function runtTests(testString) {
      let error = false;
      for (let i = 0; i < testString.length; i++) {
        try {
          const testPromise = new Promise((resolve, reject) => {
            try {
              const test = eval(testString[i]);
              resolve(test);
            } catch (e) {
              reject(e);
            }
          });
          await testPromise;
        } catch (e) {
          error = true;
          console.log('testMSG: ' + testText[i]);
          break;
        }
      }
      if (!error) {
        console.log('completed');
      }
    };

    document.querySelector('*').innerHTML = code;
    doc.__runTest(tests);
  </script>
</body>

</html>
